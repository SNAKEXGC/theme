<!DOCTYPE html>
<html lang="zh-cn">

<head>
<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ˜Ÿè¾°å¤§æµ·</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/a251231/mass@main/panel/js/jquery.base64.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/a251231/mass@main/panel/js/skel.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sweetalert2@10.15.5/dist/sweetalert2.all.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/davidshimjs-qrcodejs@0.0.2/qrcode.min.js"></script>
	
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/a251231/mass@main/panel/css/other.css?66886666">
    <link rel="icon" type="image/x-icon" href="https://github.com/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/a251231/mass@main/panel/css/sweetalert.css">
	<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/a251231/mass@main/panel/js/sweetalert-dev.js"></script>
    </head>

<body class="landing">
    <script type="text/javascript" color="255,255,255" opacity='0.7' zIndex="auto" count="200" src="https://cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
    <div id="page-wrapper">

        <section id="banner">
            <div class="inner">
                <h2>æ˜Ÿè¾°å¤§æµ·,ä¸ä½ åŒåœ¨</h2>
                <p>æ‰«ç å³å¯å¼€å§‹ä½¿ç”¨</p>
                 <ul class="actions">
                    <div>
                        <img id="qrcode" height="170em" src="./ok.svg" />
                    </div>
                        <li>
                            <li><a id="jumpapp" href="#" class="button" title="APPç™»å½•">è·³è½¬äº¬ä¸œAPPæ·»åŠ </a>

                            <li><a id="la" class="button" title="ç”¨æˆ·ç¾¤" href="https://jq.qq.com/?_wv=1027&k=BPfE1Gs1">åŠ å…¥è–…ç¾Šæ¯›ç¾¤</a>
                            
                            <li><a id="lcshogin" class="button" title="æœºå™¨äººä½¿ç”¨æŒ‡å—" href="https://shimo.im/docs/6vcJQkJhKKYJhd3H/">BOTä½¿ç”¨æŒ‡å—</a>
                        </li>
                </ul>
                <p>
                    <a href="https://t.me/byxh1" target="_blank" style="color:rgb(12, 243, 32);font-weight:bold"> [TGç¾¤(é˜²ç‚¸)]</a><br>
                     <br /> <a style="font-size:12px;">æ‰‹æœºç”¨æˆ·å¯ç›´æ¥è½¬è·³jdç™»å½•,ç”µè„‘ç”¨æˆ·è¯·ç”¨æ‰‹æœºæ‰«ç ç™»å½•</a>
                    <br /> <a style="font-size:12px;">ç™»å½•åç½‘é¡µè½¬è·³åˆ°ç®¡ç†ç•Œé¢,è¯·åœ¨QQä¸€æ å¤‡æ³¨ä½ çš„QQå·</a>
                </p>

                <div class="more">
                    
                    <br />æ¬¢è¿ğŸ§¡ä½¿ç”¨

                </div>
            </div>
        </section>
    </div>
	
	<div>
        <script>
            swal("\nè¯·åŠ è–…ç¾Šæ¯›ç¾¤è·å–èµ„äº§å˜åŠ¨æ¨é€", "ä¸ºäº†æ‚¨çš„èµ„äº§å®‰å…¨ï¼Œè¯·åŠ¡å¿…å…³é—­å°é¢å…å¯†æ”¯ä»˜ï¼", "Thanks For Using")
        </script>
	</div>
</body>
<script>
var timer;
    var qrcode = document.getElementById("qrcode")
    var loginUrl = ""
    var success = "https://ghproxy.com/https://raw.githubusercontent.com/cdle/jd_study/main/xdd/static/ok.svg";
    var jumpapp = document.getElementById('jumpapp')
    var hd = document.getElementById("hd")
    function showQrcode() {
        var xmlhttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject("Microsoft.XMLHTTP");
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                data = JSON.parse(xmlhttp.responseText)
                if (data.url && data.url.indexOf("http") != -1) {
                    qrcode.src = "data:image/png;base64," + data.img
                    loginUrl = data.url
                } else {
                    showQrcode()
                }
            }
        }
        xmlhttp.open("GET", "/api/login/qrcode", true);
        xmlhttp.send();
    }
    showQrcode()

			function login() {
				var xmlhttp = window.XMLHttpRequest
					? new XMLHttpRequest()
					: new ActiveXObject("Microsoft.XMLHTTP");
				xmlhttp.onreadystatechange = function () {
					if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
						var results = xmlhttp.responseText;
						console.log(results);
						switch (results) {
							case "æˆæƒç™»å½•æœªç¡®è®¤":
								break;
							case "ç™»å½•":
								qrcode.src = success;
								clearInterval(timer);
								setTimeout(() => {
									window.location.href = "/admin"
								}, 1000);
								break;
							case "æˆåŠŸ":
								qrcode.src = success;
								clearInterval(timer);
								setTimeout(() => {}, 1000);
								break;
							default:
								showQrcode();
								break;
						}
					}
				};
				xmlhttp.open("GET", "/api/login/query", true);
				xmlhttp.send();
			}

    function polling() {
        timer = setInterval(() => {
            login()
        }, 1500);
    }
    polling()

    jumpapp.addEventListener('click', function() {
        if (loginUrl) {
            window.location.href = `openapp.jdmobile://virtual/ad?params=${encodeURI(
                JSON.stringify({
                    category: 'jump',
                    des: 'ThirdPartyLogin',
                    action: 'to',
                    onekeylogin: 'return',
                    url: loginUrl,
                    authlogin_returnurl: 'weixin://',
                    browserlogin_fromurl: window.location.host,
                })
            )}`;
        } else {
            alert('å‡ºäº†ç‚¹å°é—®é¢˜ï¼Œè¯·åˆ·æ–°è¯•è¯•ï¼');
        }
    })
</script>
</html>
